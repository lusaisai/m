!function(){var a=function(a){this.divID="lyricer",this.currentcss="lyricer-current-line",this.lineidPrefix="lyricer-line",this.showLines=8,a&&this.setLrc(a)};a.prototype.setLrc=function(a){this.tags={},this.lrc=[],this.rangeLrc=[];for(var c=/\[([a-z]+):(.*)\].*/,d=/(\[[0-9.:\[\]]*\])+(.*)/,e=/\[([0-9]+):([0-9.]+)\]/,f=a.split(/[\r\n]/),g=0;g<f.length;g++){var h=c.exec(f[g]);if(h&&h[0])this.tags[h[1]]=h[2];else{var i=d.exec(f[g]);if(i&&i[0])for(var j=i[1].replace(/\]\[/g,"],[").split(","),k=0;k<j.length;k++){var l=e.exec(j[k]);l&&l[0]&&this.lrc.push({starttime:60*parseInt(l[1],10)+parseFloat(l[2]),line:i[2]})}}}this.lrc.sort(function(a,b){return a.starttime-b.starttime});for(var g=0;g<this.showLines;g++)this.rangeLrc.push({starttime:-1,endtime:0,line:"&nbsp;"});for(var m=0,n="",g=0;g<this.lrc.length;g++)endtime=parseFloat(this.lrc[g].starttime),this.rangeLrc.push({starttime:m,endtime:endtime,line:n}),m=endtime,n=this.lrc[g].line;this.rangeLrc.push({starttime:m,endtime:999.99,line:n});for(var g=0;g<this.showLines;g++)this.rangeLrc.push({starttime:-1,endtime:0,line:"&nbsp;"});this.totalLines=this.rangeLrc.length,b(this),this.move(0)};var b=function(a){a.currentLine=0;var b=document.getElementById(a.divID);b.innerHTML="";var c=document.createElement("ul");b.appendChild(c);for(var d=0;d<a.totalLines;d++){var e=document.createElement("li");e.innerHTML=a.rangeLrc[d].line,e.innerHTML||(e.innerHTML="&nbsp;"),e.setAttribute("id",a.lineidPrefix+d),d==a.currentLine&&(e.className=a.currentcss),c.appendChild(e)}for(var d=a.showLines;d<a.totalLines;d++)document.getElementById(a.lineidPrefix+d).style.display="none"};a.prototype.move=function(a){for(var b=0;b<this.totalLines;b++)if(a>=this.rangeLrc[b].starttime&&a<this.rangeLrc[b].endtime)return this.currentLine=b,c(this,this.currentLine),void 0};var c=function(a,b){for(var c=b-a.showLines,d=b+a.showLines,e=0;e<a.totalLines;e++){var f=document.getElementById(a.lineidPrefix+e);f.style.display=e>=c&&d>=e?"block":"none",f.className=e==b?a.currentcss:""}};window.Lyricer=a}();