!function(){var a=function(a){this.divID="lyricer",this.currentcss="lyricer-current-line",this.lineidPrefix="lyricer-line",this.showLines=8,a&&(this.setLrc(a),this.setHtml())};a.prototype.setLrc=function(a){this.tags={},this.lrc=[],this.rangeLrc=[];for(var b=/\[([a-z]+):(.*)\].*/,c=/(\[[0-9.:\[\]]*\])+(.*)/,d=/\[([0-9]+):([0-9.]+)\]/,e=a.split(/[\r\n]/),f=0;f<e.length;f++){var g=b.exec(e[f]);if(g&&g[0])this.tags[g[1]]=g[2];else{var h=c.exec(e[f]);if(h&&h[0])for(var i=h[1].replace(/\]\[/g,"],[").split(","),j=0;j<i.length;j++){var k=d.exec(i[j]);k&&k[0]&&this.lrc.push({starttime:60*parseInt(k[1],10)+parseFloat(k[2]),line:h[2]})}}}this.lrc.sort(function(a,b){return a.starttime-b.starttime});for(var l=0,m="",f=0;f<this.lrc.length;f++)endtime=parseFloat(this.lrc[f].starttime),this.rangeLrc.push({starttime:l,endtime:endtime,line:m}),l=endtime,m=this.lrc[f].line;this.rangeLrc.push({starttime:l,endtime:999.99,line:m}),this.totalLines=this.rangeLrc.length,this.setHtml()},a.prototype.setHtml=function(){this.currentLine=0;var a=document.getElementById(this.divID);a.innerHTML="";var b=document.createElement("ul");a.appendChild(b);for(var c=0;c<this.totalLines;c++){var d=document.createElement("li");d.innerHTML=this.rangeLrc[c].line,d.innerHTML||(d.innerHTML="&nbsp;"),d.setAttribute("id",this.lineidPrefix+c),c==this.currentLine&&(d.className=this.currentcss),b.appendChild(d)}for(var c=this.showLines;c<this.totalLines;c++)document.getElementById(this.lineidPrefix+c).style.display="none"},a.prototype.move=function(a){for(var c=0;c<this.totalLines;c++)if(a>=this.rangeLrc[c].starttime&&a<this.rangeLrc[c].endtime)return this.currentLine=c,b(this,this.currentLine),void 0};var b=function(a,b){for(var c=b-a.showLines,d=b+a.showLines,e=0;e<a.totalLines;e++){var f=document.getElementById(a.lineidPrefix+e);f.style.display=e>=c&&d>=e?"block":"none",f.className=e==b?a.currentcss:""}};window.Lyricer=a}();